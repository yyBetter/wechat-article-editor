# 智能粘贴功能测试指南

## 🎉 新功能：智能粘贴

现在支持从飞书、Notion、Word、Google Docs等平台直接复制内容，自动转换为Markdown格式！

---

## 🚀 快速测试

### 1. 启动本地环境

```bash
# 确保服务正在运行
http://localhost:3001
```

### 2. 登录账号

- 邮箱：`test@test.com`
- 密码：`123456`

### 3. 开始测试粘贴

---

## 📋 测试用例

### 测试1：飞书文档粘贴

**步骤：**
1. 打开飞书文档
2. 复制一段包含以下元素的内容：
   - 标题（一级、二级、三级）
   - 粗体、斜体文本
   - 列表（无序列表、有序列表）
   - 引用块
   - 代码块
3. 在编辑器中按 `Ctrl+V` (或 `Cmd+V`)
4. 观察转换结果

**预期结果：**
- ✅ 显示通知：`🔄 正在智能识别格式...`
- ✅ 成功后显示：`✅ 从飞书文档导入成功！`
- ✅ 内容自动转换为Markdown格式
- ✅ 格式保持完整

### 测试2：Notion粘贴

**步骤：**
1. 打开Notion页面
2. 复制包含：
   - 标题
   - 段落
   - Todo列表
   - 表格
   - 代码块
3. 粘贴到编辑器

**预期结果：**
- ✅ 识别来源：`从Notion导入成功！`
- ✅ 表格转换为Markdown表格
- ✅ 格式保持正确

### 测试3：Word文档粘贴

**步骤：**
1. 在Word中创建包含：
   - 多级标题
   - 粗体、斜体、删除线
   - 列表
   - 图片（会显示图片链接）
2. 复制粘贴到编辑器

**预期结果：**
- ✅ 识别来源：`从Word文档导入成功！`
- ✅ 样式转换正确
- ✅ 图片显示为Markdown图片语法

### 测试4：富文本HTML粘贴

**步骤：**
1. 从任何网页复制富文本内容
2. 粘贴到编辑器

**预期结果：**
- ✅ 识别来源：`从富文本导入成功！`
- ✅ HTML标签被清理
- ✅ 转换为干净的Markdown

### 测试5：纯文本粘贴

**步骤：**
1. 复制纯文本内容
2. 粘贴到编辑器

**预期结果：**
- ✅ 直接插入，不经过转换
- ✅ 保持原样

---

## 🔍 详细测试内容

### 飞书测试内容（复制以下内容到飞书，再复制出来粘贴）

```
这是飞书测试内容

# 一级标题
## 二级标题
### 三级标题

这是一段**粗体文字**和*斜体文字*的组合。

无序列表：
- 列表项1
- 列表项2
  - 嵌套项2.1
  - 嵌套项2.2
- 列表项3

有序列表：
1. 第一步
2. 第二步
3. 第三步

> 这是一段引用文字
> 可以有多行

代码块示例：
```javascript
function hello() {
  console.log('Hello World')
}
```

这是一个[链接](https://example.com)
```

### Notion测试内容

```
Notion测试文档

# 主标题

## 功能清单
- [ ] 待办事项1
- [x] 已完成事项
- [ ] 待办事项2

## 表格示例
| 姓名 | 年龄 | 城市 |
|------|------|------|
| 张三 | 25   | 北京 |
| 李四 | 30   | 上海 |

## 代码块
```python
def greet(name):
    return f"Hello, {name}!"
```

**粗体** *斜体* ~~删除线~~
```

---

## 🎯 功能特性检查清单

### 基础功能
- [ ] 能识别飞书文档
- [ ] 能识别Notion
- [ ] 能识别Word文档
- [ ] 能识别Google Docs
- [ ] 能识别石墨文档
- [ ] 能识别语雀

### 格式转换
- [ ] 标题（H1-H6）正确转换
- [ ] 粗体转换为 `**text**`
- [ ] 斜体转换为 `*text*`
- [ ] 列表缩进正确
- [ ] 代码块保持原样
- [ ] 表格转换为Markdown表格
- [ ] 引用块转换为 `>`
- [ ] 链接转换正确

### 清理功能
- [ ] 移除内联样式
- [ ] 移除脚本和样式标签
- [ ] 清理平台特殊标记
- [ ] 统一空行格式

### 用户体验
- [ ] 显示"正在识别..."提示
- [ ] 显示来源平台
- [ ] 显示图片数量（如果有）
- [ ] 转换失败时优雅降级
- [ ] 光标位置正确恢复

---

## 🐛 已知问题（需要注意）

### 可能的问题
1. **图片处理**：目前图片只保留链接，不会自动上传
2. **表格复杂度**：非常复杂的表格可能格式不完美
3. **嵌套列表**：超过3层的嵌套可能有格式问题

### 优化方向
1. 自动下载外链图片到本地
2. 优化表格合并单元格支持
3. 改进嵌套列表处理
4. 添加粘贴预览功能

---

## 📊 测试报告模板

测试完成后，请填写：

```
测试日期：____
测试人：____

测试结果：
✅ 飞书粘贴：[ ] 通过 [ ] 失败 (备注：____)
✅ Notion粘贴：[ ] 通过 [ ] 失败 (备注：____)
✅ Word粘贴：[ ] 通过 [ ] 失败 (备注：____)
✅ 富文本粘贴：[ ] 通过 [ ] 失败 (备注：____)

遇到的问题：
1. ____
2. ____

改进建议：
1. ____
2. ____
```

---

## 💡 测试技巧

### 1. 使用浏览器开发者工具

按 `F12` 打开控制台，可以看到详细的转换日志：

```javascript
[粘贴处理器] 检测到来源: 飞书文档
[粘贴处理器] 转换完成: {
  source: "飞书文档",
  length: 1245,
  imageCount: 0
}
[智能粘贴] { markdown: "...", source: "飞书文档", ... }
```

### 2. 对比原文和转换结果

- 在预览区查看渲染效果
- 检查格式是否正确
- 确认没有丢失内容

### 3. 测试边界情况

- 空内容粘贴
- 纯图片粘贴
- 超长文本粘贴
- 特殊字符粘贴

---

## 🎉 测试成功的标志

当你完成所有测试并看到：

- ✅ 所有平台都能正确识别
- ✅ 格式转换准确
- ✅ 没有错误提示
- ✅ 用户体验流畅

**恭喜！智能粘贴功能测试通过！** 🚀

---

## 📞 问题反馈

如果遇到问题，记录以下信息：

1. 来源平台（飞书/Notion/Word等）
2. 粘贴的原始内容
3. 转换后的结果
4. 浏览器控制台的错误信息
5. 预期效果 vs 实际效果

---

**现在开始测试吧！** 🚀

访问：http://localhost:3001

