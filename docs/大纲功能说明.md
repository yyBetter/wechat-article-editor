# 📋 大纲功能使用说明

## ✨ 功能介绍

大纲面板自动解析文档中的 Markdown 标题，以树形结构展示文档的整体框架，帮助你更好地组织和导航长文档。

---

## 🎯 主要功能

### 1. 自动生成大纲
- 自动识别 `#` `##` `###` 等 Markdown 标题
- 实时更新：编辑标题后，大纲立即同步
- 层级展示：通过缩进显示标题层级关系

### 2. 快速导航
- **点击节点** → 编辑器自动跳转到对应标题
- **高亮当前位置** → 编辑时，大纲自动高亮当前章节
- **显示行号** → 鼠标悬停显示标题所在行

### 3. 统计信息
- 显示总标题数量
- 按层级统计（H1: 1, H2: 3, H3: 5...）
- 快速了解文档结构复杂度

### 4. 折叠展开
- 默认展开，占据左侧 280px
- 点击 "✕" 折叠到 48px（只显示图标）
- 偏好自动保存到本地

---

## 🚀 快速开始

### 第一步：创建标题

在编辑器中输入 Markdown 标题：

```markdown
# 一级标题（文档主标题）

## 二级标题（章节标题）

正文内容...

### 三级标题（小节标题）

更多内容...

## 另一个二级标题

...
```

### 第二步：查看大纲

左侧自动出现大纲面板：

```
📋 文档大纲 (4)
───────────────
H1: 1  H2: 2  H3: 1

# 一级标题（文档主标题）
## 二级标题（章节标题）
### 三级标题（小节标题）
## 另一个二级标题
```

### 第三步：快速跳转

点击任意标题节点 → 编辑器自动滚动到对应位置 ✓

---

## 💡 使用技巧

### 1. 标题层级建议

```
推荐结构：
# 文档总标题（唯一）
  ## 第一章
    ### 1.1 小节
    ### 1.2 小节
  ## 第二章
    ### 2.1 小节
    ### 2.2 小节

避免层级跳跃：
# 一级
### 三级  ❌ （缺少二级）

正确写法：
# 一级
## 二级
### 三级  ✓
```

### 2. 写长文档的流程

```
第一步：先写大纲
# 主标题
## 引言
## 核心观点1
## 核心观点2
## 结论

第二步：逐个填充内容
点击"## 引言" → 在标题下方写内容
点击"## 核心观点1" → 继续填充...

第三步：查看整体
大纲清晰展示所有章节
随时调整结构
```

### 3. 大纲 + 错别字检查

```
写作模式：大纲展开 + 错别字关闭
  ↓ 专注写作，参考大纲
完稿模式：大纲折叠 + 错别字开启
  ↓ 全面检查，润色内容
```

---

## 🎨 界面说明

### 大纲节点

```
┌─────────────────────────────────┐
│ # 一级标题               L1      │  ← 当前激活（蓝色高亮）
│ ## 二级标题              L5      │
│   ### 三级标题           L8      │  ← 缩进显示层级
│ ## 另一个二级            L12     │
└─────────────────────────────────┘
```

**元素说明：**
- `#` `##` `###` - 层级标记
- 标题文本 - 点击跳转
- `L1` `L5` - 行号（悬停显示）
- 蓝色背景 - 当前编辑位置

### 统计信息

```
H1: 1  H2: 3  H3: 5
│      │      └─ 5个三级标题
│      └─ 3个二级标题
└─ 1个一级标题
```

---

## ⚙️ 设置选项

### 折叠/展开

| 状态 | 宽度 | 操作 |
|------|------|------|
| 展开 | 280px | 点击 "✕" 折叠 |
| 折叠 | 48px | 点击 "📋" 展开 |

**快捷键**（计划中）：
- `Cmd/Ctrl + B` - 切换大纲显示

### 自动保存偏好

```javascript
// 自动保存到 localStorage
localStorage.setItem('outline_collapsed', 'true/false')

// 下次打开自动恢复状态
```

---

## 📊 适用场景

### ✅ 适合使用大纲

1. **长文档** - 超过 1000 字，多个章节
2. **技术文档** - 需要清晰的层级结构
3. **教程文章** - 步骤明确，层次分明
4. **产品介绍** - 功能模块多，需要导航

示例：
```
# 产品使用手册
## 快速开始
### 安装
### 配置
## 核心功能
### 功能A
### 功能B
## 进阶使用
### 高级配置
### API 文档
```

### ❌ 不适合使用大纲

1. **短文本** - 少于 300 字，无需大纲
2. **单一主题** - 只有1-2个标题
3. **列表文章** - 扁平结构，无层级

---

## 🐛 常见问题

### Q1: 大纲为什么是空的？

**A:** 检查以下几点：
1. 文档中是否有 Markdown 标题？
2. 标题格式是否正确？（`#` 后需要空格）
3. 是否保存了文档内容？

**正确格式：**
```markdown
# 标题一      ✓
## 标题二     ✓
###标题三     ❌ （缺少空格）
#  标题四     ✓ （多个空格也可以）
```

### Q2: 点击节点为什么不跳转？

**A:** 可能原因：
1. 编辑器未获得焦点
2. 浏览器性能问题（大文档）

**解决方法：**
- 先点击编辑器获得焦点
- 再点击大纲节点

### Q3: 大纲更新不及时？

**A:** 大纲是实时更新的，如果没更新：
1. 检查标题格式是否正确
2. 尝试刷新页面
3. 查看浏览器控制台是否有错误

### Q4: 如何隐藏大纲？

**A:** 点击右上角的 "✕" 按钮，大纲折叠到最小

---

## 🚀 未来功能

### v1.1 - 拖拽重组（开发中）
- 拖拽节点调整顺序
- 自动重组文档结构
- 撤销/重做支持

### v1.2 - 树形结构
- 节点折叠/展开
- 父子关系清晰
- 快速定位章节

### v1.3 - AI 辅助
- 智能生成大纲建议
- 检测结构问题
- 优化标题层级

### v1.4 - 高级功能
- 导出大纲（Markdown、PDF）
- 大纲模板库
- 协作批注

---

## 💬 反馈与建议

如果你在使用大纲功能时遇到问题或有改进建议，欢迎反馈！

**常见反馈：**
- 希望支持拖拽调整顺序 ✓（计划中）
- 希望支持节点折叠 ✓（计划中）
- 希望支持快捷键 ✓（计划中）

---

**最后更新：2025-10-03**  
**版本：v1.0 MVP**  
**状态：✅ 基础功能已实现**



