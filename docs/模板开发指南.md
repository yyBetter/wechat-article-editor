# 📐 模板开发指南

完整的微信公众号文章模板开发和管理指南

## 🎯 概述

本系统采用模块化的模板架构，每个模板都是一个独立的 TypeScript 模块，通过统一的接口定义样式、行为和配置。

### 架构组成

```
src/templates/
├── index.ts                    # 模板注册中心
├── simple-doc.ts               # 简约文档模板
├── image-text.ts               # 图文并茂模板
├── tech-modern.ts              # 科技现代模板
├── business-formal.ts          # 商务正式模板
├── literary-elegant.ts         # 文艺优雅模板
└── [your-template].ts          # 你的新模板
```

---

## 🚀 快速开始：添加新模板

### 步骤 1️⃣：创建模板文件

在 `src/templates/` 目录下创建新文件，例如 `news-style.ts`：

```typescript
import { Template } from '../types/template'

export const newsStyleTemplate: Template = {
  id: 'news-style',                              // 唯一标识符
  name: '新闻风格',                              // 显示名称
  description: '适合新闻报道、时事评论',          // 简短描述
  category: 'document',                          // 分类: document | image-text | custom
  brandColors: ['#d32f2f', '#424242', '#757575'], // 品牌配色 [主色, 副色, 强调色]
  thumbnail: '/assets/thumbnails/news-style.png', // 缩略图路径
  
  // 使用说明（可选，会显示在帮助提示中）
  usage: `
## 模板使用说明
### Markdown 语法对应关系：
- **# 大标题** → 文章主标题（居中，24px）
- **## 章节标题** → 章节标题（左对齐，20px）
...
  `,
  
  // 样式配置
  styles: {
    container: {
      maxWidth: '100%',
      padding: '20px 16px',
      backgroundColor: '#ffffff',
      fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
      lineHeight: '1.6',
      textAlign: 'left'
    },
    
    typography: {
      h1: {
        fontSize: '24px',
        fontWeight: 'bold',
        color: '#000000',
        marginBottom: '24px',
        textAlign: 'center',
        lineHeight: '1.3'
      },
      // ... 其他排版样式
    },
    
    elements: {
      img: { /* 图片样式 */ },
      ul: { /* 列表样式 */ },
      // ... 其他元素样式
    }
  },
  
  // 固定元素（如页眉、页脚）
  fixedElements: {
    footer: {
      template: ``, // HTML模板字符串
      position: 'after',
      variables: {}
    }
  }
}
```

### 步骤 2️⃣：注册模板

在 `src/templates/index.ts` 中注册你的模板：

```typescript
// 1. 导入模板
import { newsStyleTemplate } from './news-style'

// 2. 添加到模板数组
export const templates: Template[] = [
  simpleDocTemplate,
  imageTextTemplate,
  newsStyleTemplate,  // 👈 添加这里
  // ... 其他模板
]

// 3. 添加预设配置
export const templatePresets = {
  // ... 其他模板预设
  'news-style': {
    name: '新闻风格',
    icon: '📰',
    description: '适合新闻报道和时事评论',
    scenarios: ['新闻报道', '时事评论', '媒体内容']
  }
}
```

### 步骤 3️⃣：测试模板

1. 启动开发服务器：`npm run dev`
2. 打开应用，在预览区域点击模板选择器
3. 选择你的新模板，查看效果
4. 调整样式直到满意

---

## 📝 模板配置详解

### 1. 基本信息

```typescript
{
  id: 'unique-template-id',        // 必须唯一
  name: '模板显示名称',             // 用户看到的名称
  description: '简短描述文本',      // 显示在选择器中
  category: 'document',            // document | image-text | custom
  thumbnail: '/path/to/thumb.png'  // 缩略图（可选）
}
```

### 2. 品牌配色

配色数组定义了模板的默认颜色方案：

```typescript
brandColors: [
  '#1e6fff',  // [0] 主色 - 用于链接、强调
  '#333333',  // [1] 副色 - 用于标题
  '#666666'   // [2] 强调色 - 用于次要文本
]
```

**最佳实践：**
- 主色：鲜明、吸引眼球，用于CTA和重要元素
- 副色：沉稳、易读，用于标题和正文
- 强调色：中性、辅助，用于次要信息

### 3. 容器样式 (container)

定义文章容器的基本样式：

```typescript
container: {
  maxWidth: '100%',              // 最大宽度
  padding: '20px 16px',          // 内边距
  backgroundColor: '#ffffff',     // 背景色
  fontFamily: 'sans-serif',      // 字体族
  lineHeight: '1.6',             // 行高
  textAlign: 'left'              // 对齐方式
}
```

### 4. 排版样式 (typography)

定义各级标题和文本的样式：

```typescript
typography: {
  h1: {                          // 一级标题
    fontSize: '24px',
    fontWeight: 'bold',
    color: '#000000',
    marginBottom: '24px',
    textAlign: 'center',
    lineHeight: '1.3'
  },
  h2: { /* 二级标题 */ },
  h3: { /* 三级标题 */ },
  p: { /* 段落 */ },
  a: { /* 链接 */ },
  strong: { /* 加粗 */ },
  em: { /* 斜体 */ },
  code: { /* 行内代码 */ },
  blockquote: { /* 引用块 */ }
}
```

**可用样式属性：**
- `fontSize`: 字体大小
- `fontWeight`: 字体粗细 (normal | bold | 100-900)
- `color`: 文字颜色
- `margin` / `marginTop` / `marginBottom`: 外边距
- `padding` / `paddingLeft` / `paddingRight`: 内边距
- `textAlign`: 对齐方式 (left | center | right | justify)
- `lineHeight`: 行高
- `textDecoration`: 文本装饰 (none | underline)
- `backgroundColor`: 背景色
- `border` / `borderLeft` / `borderBottom`: 边框
- `borderRadius`: 圆角

### 5. 元素样式 (elements)

定义列表、图片等元素的样式：

```typescript
elements: {
  ul: {                          // 无序列表
    paddingLeft: '20px',
    marginBottom: '16px',
    listStyle: 'disc'
  },
  ol: {                          // 有序列表
    paddingLeft: '20px',
    marginBottom: '16px',
    listStyle: 'decimal'
  },
  li: {                          // 列表项
    marginBottom: '8px',
    lineHeight: '1.6'
  },
  img: {                         // 图片
    width: '100%',
    maxWidth: '100%',
    height: 'auto',
    marginBottom: '16px',
    borderRadius: '4px',
    boxShadow: '0 2px 8px rgba(0,0,0,0.1)'
  },
  hr: {                          // 分割线
    border: 'none',
    height: '1px',
    backgroundColor: '#e0e0e0',
    margin: '32px 0'
  }
}
```

### 6. 图文块样式 (imageBlock) - 可选

针对图文模板的特殊样式：

```typescript
imageBlock: {
  container: {
    marginBottom: '32px'
  },
  image: {
    width: '100%',
    borderRadius: '8px'
  },
  title: {
    fontSize: '18px',
    fontWeight: 'bold',
    textAlign: 'center'
  },
  description: {
    fontSize: '14px',
    color: '#666666'
  }
}
```

---

## 🎨 设计最佳实践

### 1. 配色方案

**建议配色组合：**

```typescript
// 科技风
['#00d4ff', '#7c3aed', '#ec4899']

// 商务风
['#2c5282', '#1a202c', '#718096']

// 文艺风
['#d4a574', '#8b7355', '#a0826d']

// 清新风
['#34d399', '#10b981', '#059669']

// 活力风
['#f59e0b', '#ef4444', '#ec4899']
```

### 2. 字体大小规范

```typescript
// 推荐尺寸（移动端优化）
h1: '24-28px'    // 主标题
h2: '20-22px'    // 二级标题
h3: '18-19px'    // 三级标题
p:  '15-16px'    // 正文
small: '13-14px' // 小字
```

### 3. 间距规范

```typescript
// 标题间距
h1: { marginBottom: '24-32px' }
h2: { margin: '32-36px 0 16-20px 0' }
h3: { margin: '24-28px 0 12-16px 0' }

// 段落间距
p: { marginBottom: '16-20px' }

// 图片间距
img: { marginBottom: '16-24px' }
```

### 4. 行高建议

```typescript
标题: 1.2 - 1.4
正文: 1.6 - 1.8
列表: 1.6 - 1.75
引用: 1.5 - 1.7
```

---

## 🔧 高级功能

### 1. 条件渲染（固定元素）

在 `fixedElements` 中可以使用条件语句：

```typescript
fixedElements: {
  footer: {
    template: `
      {{#if qrcode}}
      <div style="text-align: center; margin-top: 40px;">
        <img src="{{qrcode}}" style="width: 200px;" />
        <p>扫码关注</p>
      </div>
      {{/if}}
    `,
    position: 'after',
    variables: {}
  }
}
```

### 2. 自定义CSS动画

```typescript
h2: {
  fontSize: '20px',
  animation: 'fadeIn 0.5s ease-in'
}
```

### 3. 渐变背景

```typescript
h1: {
  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
  WebkitBackgroundClip: 'text',
  WebkitTextFillColor: 'transparent'
}
```

---

## ✅ 测试清单

创建新模板后，请检查以下项：

- [ ] 模板ID唯一且符合命名规范
- [ ] 在模板选择器中正确显示
- [ ] 配色方案协调美观
- [ ] 所有标题级别样式正确
- [ ] 段落、列表、引用样式正常
- [ ] 图片显示和缩放正常
- [ ] 链接颜色和样式清晰
- [ ] 代码块样式易读
- [ ] 移动端显示正常（手机预览模式）
- [ ] 复制到微信公众号后格式保持

---

## 📋 模板命名规范

### 文件命名
- 使用小写字母和连字符
- 格式：`[风格]-[特征].ts`
- 例如：`tech-modern.ts`, `business-formal.ts`

### ID命名
- 与文件名一致
- 格式：`[风格]-[特征]`
- 例如：`tech-modern`, `business-formal`

### 显示名称
- 简短有力（2-4个字）
- 直观表达风格
- 例如：科技现代、商务正式、文艺优雅

---

## 🔍 常见问题

### Q1: 为什么我的模板不显示？
**A:** 检查是否在 `src/templates/index.ts` 中正确注册了模板和预设配置。

### Q2: 如何修改现有模板？
**A:** 直接编辑对应的模板文件，保存后刷新浏览器即可看到效果。

### Q3: 配色不生效怎么办？
**A:** 确保在 `brandColors` 中定义了配色，并且在样式中引用了对应的颜色变量。

### Q4: 如何让某个元素使用品牌主色？
**A:** 在该元素的样式中，将 `color` 设置为 `#1e6fff`，系统会自动替换为当前品牌主色。

### Q5: 图片样式在微信中显示异常？
**A:** 使用内联样式，避免使用 `display: flex` 等微信不支持的属性。

---

## 📚 参考资源

### 模板示例
- [简约文档](../src/templates/simple-doc.ts) - 基础文档模板
- [图文并茂](../src/templates/image-text.ts) - 图片优先模板
- [科技现代](../src/templates/tech-modern.ts) - 科技风格模板
- [商务正式](../src/templates/business-formal.ts) - 商务风格模板
- [文艺优雅](../src/templates/literary-elegant.ts) - 文艺风格模板

### 类型定义
- [Template Interface](../src/types/template.ts) - 完整的类型定义

### 工具函数
- [TemplateEngine](../src/utils/template-engine.ts) - 模板渲染引擎

---

## 💡 贡献你的模板

如果你创建了优秀的模板，欢迎分享！

1. 确保代码质量和注释完整
2. 提供使用示例和截图
3. 创建 Pull Request
4. 描述模板的特点和适用场景

---

## 📞 需要帮助？

- 查看现有模板代码作为参考
- 阅读类型定义了解可用配置
- 在开发者工具中调试样式
- 提交 Issue 获取帮助

---

**祝你创建出精美的模板！** 🎉

