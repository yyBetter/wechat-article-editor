# 📐 编辑器布局定位指南

## 右下角浮层组件位置规划

为了避免多个浮层组件重叠，我们统一规划了右下角的布局：

### 位置分配（从下到上）

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│     ┌────────────────────┐      │
│     │  错误列表（展开时）  │ 160px  │
│     └────────────────────┘      │
│                                 │
│     ┌────────────────────┐      │
│     │  错别字统计/开关    │ 110px  │
│     └────────────────────┘      │
│                                 │
│     ┌────────────────────┐      │
│     │  存储状态监控       │ 60px   │
│     └────────────────────┘      │
│                                 │
│                          20px → │
└─────────────────────────────────┘
```

### 详细位置

| 组件 | 位置 | z-index | 说明 |
|------|------|---------|------|
| **存储状态监控** | `bottom: 60px` | 1000 | 最底层，始终可见 |
| **错别字开关** | `bottom: 110px` | 99 | 关闭时显示 |
| **错别字统计面板** | `bottom: 110px` | 100 | 开启时显示 |
| **错别字列表** | `bottom: 160px` | 101 | 点击"查看"时展开 |

### 间距说明

- **底部留空**: 20px（避免贴边）
- **组件间距**: 50px（错别字与存储状态）
- **列表展开**: 额外 50px 向上

### 响应式调整

```css
@media (max-width: 768px) {
  /* 移动端所有组件右侧距离减小 */
  right: 10px;
}

@media (max-height: 600px) {
  /* 小屏幕高度，压缩组件间距 */
  .spell-check-panel {
    bottom: 80px;  /* 减少间距 */
  }
  
  .spell-errors-list {
    bottom: 120px;
    max-height: 200px;  /* 减少高度 */
  }
}
```

### 状态切换

**错别字检查关闭时：**
```
存储状态监控（60px）
     ↓ 50px
错别字开关（110px）
```

**错别字检查开启时：**
```
存储状态监控（60px）
     ↓ 50px
错别字统计面板（110px）
```

**查看错误列表时：**
```
存储状态监控（60px）
     ↓ 50px
错别字统计面板（110px）
     ↓ 50px
错别字列表（160px）
```

### 避免冲突原则

1. **互斥显示**: 错别字开关 vs 统计面板（同一位置，只显示一个）
2. **向上扩展**: 新增组件向上堆叠，保持底部固定
3. **z-index 分层**: 从下到上递增（1000, 99-101）
4. **最小间距**: 组件之间至少 50px

### 新增组件指南

如需添加新的右下角浮层组件：

1. **选择位置**: 
   - 在现有组件之上: `bottom: 210px`
   - 与现有组件互斥: 共用位置 + 条件渲染

2. **设置 z-index**:
   - 在列表之上: `z-index: 102+`
   - 在统计面板之上: `z-index: 101`

3. **响应式适配**:
   - 添加移动端样式
   - 考虑小屏高度

### 示例代码

```css
/* 新增组件 */
.new-component {
  position: fixed;
  bottom: 210px;  /* 在错别字列表之上 */
  right: 20px;
  z-index: 102;   /* 高于错别字列表 */
  background: white;
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

/* 移动端适配 */
@media (max-width: 768px) {
  .new-component {
    right: 10px;
    bottom: 180px;  /* 压缩间距 */
  }
}
```

---

**最后更新**: 2025-10-03  
**相关文件**: 
- `src/styles/spell-checker.css`
- `src/components/StorageStatusMonitor.tsx`

